/*===========================================================================*
 * File:        utils.c
 * Project:     ECU
 * Author:      Mateusz Mroz
 * Date:        10.10.2021
 * Brief:       Utils
 *===========================================================================*/

/*===========================================================================*
 *
 * INCLUDE SECTION
 *
 *===========================================================================*/

#include "utils.h"

/*===========================================================================*
 *
 * DEFINES AND MACRO SECTION
 *
 *===========================================================================*/

#define UTILS_32BIT_NUMBER_STRING_MAX_LEN           (33u)

/*===========================================================================*
 *
 * LOCAL TYPES AND ENUMERATION SECTION
 *
 *===========================================================================*/

/*===========================================================================*
 *
 * GLOBAL VARIABLES AND CONSTANTS SECTION
 *
 *===========================================================================*/

/*===========================================================================*
 *
 * LOCAL FUNCTION DECLARATION SECTION
 *
 *===========================================================================*/

/*===========================================================================*
 *
 * FUNCTION DEFINITION SECTION
 *
 *===========================================================================*/

/*===========================================================================*
 * Function: Utils_Itoa
 *===========================================================================*/
/* TODO correct this function -> local adress return */
char* Utils_Itoa(unsigned int number, unsigned int base)
{
    char symbols[]= "0123456789ABCDEF";
    char buffer[UTILS_32BIT_NUMBER_STRING_MAX_LEN];
    char *ptr;

    ptr = &buffer[(UTILS_32BIT_NUMBER_STRING_MAX_LEN - 1u)];
    *ptr = '\0';

    do
    {
        *--ptr = symbols[number % base];
        number /= base;
    } while (number != 0);

    return (ptr);
}

/*===========================================================================*
 * Function: Utils_FloatToUint32
 *===========================================================================*/
uint32_t Utils_FloatToUint32(float inValue)
{
    uint32_t result;

    if (inValue >= 0)
    {
        result = (uint32_t)(inValue + 0.5F);
    }
    else
    {
        result = 0;
    }

    return result;
}

/*===========================================================================*
 *
 * LOCAL FUNCTION DEFINITION SECTION
 *
 *===========================================================================*/


/* end of file */
