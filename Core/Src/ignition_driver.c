/*===========================================================================*
 * File:        ignition_driver.c
 * Project:     ECU
 * Author:      Mateusz Mroz
 * Date:        09.11.2021
 * Brief:       Ignition coils driver module
 *===========================================================================*/

/*===========================================================================*
 *
 * INCLUDE SECTION
 *
 *===========================================================================*/

#include "ignition_driver.h"

/*===========================================================================*
 *
 * DEFINES AND MACRO SECTION
 *
 *===========================================================================*/

/*===========================================================================*
 *
 * LOCAL TYPES AND ENUMERATION SECTION
 *
 *===========================================================================*/

/*===========================================================================*
 *
 * GLOBAL VARIABLES AND CONSTANTS SECTION
 *
 *===========================================================================*/

/*===========================================================================*
 *
 * LOCAL FUNCTION DECLARATION SECTION
 *
 *===========================================================================*/

/*===========================================================================*
 *
 * FUNCTION DEFINITION SECTION
 *
 *===========================================================================*/

/*===========================================================================*
 * Function: IGNDRV_Init
 *===========================================================================*/
void IGNDRV_Init(void)
{
    /* Ignition timer: TIM2 CH1-CH3 */

    /* Enable TIM2 clock*/
    RCC->APB1ENR |= RCC_APB1ENR_TIM2EN;

    /* Set TIM2 clock prescaler to 0 (source clock divided by 0+1) */
    TIM2->PSC |= TIM_PSC_PSC_Msk;


    /* Set TIM2 auto-reload register to its max value */
    TIM2->ARR |= TIM_ARR_ARR_Msk;
}

/*===========================================================================*
 * Function: IGNDRV_PrepareIgnitionChannel
 *===========================================================================*/
void IGNDRV_PrepareIgnitionChannel(IgDrv_IgnitionChannels_T channel)
{
    
}

/*===========================================================================*
 * Function: IGNDRV_StartIgnitionTimer
 *===========================================================================*/
void IGNDRV_StartIgnitionTimer(void)
{
    
}

/*===========================================================================*
 *
 * LOCAL FUNCTION DEFINITION SECTION
 *
 *===========================================================================*/


/* end of file */
